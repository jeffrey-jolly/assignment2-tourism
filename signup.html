<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BmbxuPwQa2lc/FVzBcNJ7UAyJxM6wuqIj61tLrc4wSX0szH/Ev+nYRRuWlolflfl" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.6.0/dist/umd/popper.min.js" integrity="sha384-KsvD1yqQ1/1+IA7gi3P0tyJcT3vR+NdBTt13hSJ2lnve8agRGXTTyNaBYmCR/Nwi" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/js/bootstrap.min.js" integrity="sha384-nsg8ua9HAw1y0W1btsyWgBklPnCUAFLuTMS2G72MMONqmOymq585AcH49TLBQObG" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="form.css">
    <title>Sign Up</title>
</head>

<body background="./districts/images/bg.jpg">
    <!-- Navbar -->
    <div class="header ">

        <ul>
            <div class="logo ">
                <img src="images/kerala-tourism-title.png " alt="logo">
            </div>
            <li><a href="index.html" target="_blank">Home</a></li>
            <li><a href="districts.html">Districts</a></li>


        </ul>
    </div>
    <!-- /Navbar -->
    <!-- Signup form  -->
    <div class="row">
        <div class="col-lg-8">
            <form class="form rounded-lg bg-gradient-dark" action="login.html" onsubmit="return validation();" style="padding: 10px;">
                <div class="form-group col-3 mb-2" style="width: 90%;">
                    <label for="exampleInputEmail1">Email address</label>
                    <input type="email" required class="form-control" id="email" aria-describedby="emailHelp" placeholder="Enter email">
                </div>
                <div class="form-group col-3 mb-2" style="width: 90%;">
                    <label for="exampleInputPassword1">Password</label>
                    <input type="password" required class="form-control" id="exampleInputPassword1" placeholder="Password">
                </div>
                <div class="form-group col-3 mb-2" style="width: 90%;">
                    <label for="exampleInputPassword2"> Confirm Password</label>
                    <input type="password" required class="form-control" id="exampleInputPassword2" placeholder="Password">
                </div>
                <div class="indicator">
                    <span class="weak"></span>
                    <span class="medium"></span>
                    <span class="strong"></span>
                </div>
                <div class="form-group col-3 mb-2" style="width: 90%;">
                    <label for="exampleInputNumber">Mobile Number</label>
                    <input type="tele" required class="form-control" id="mobile" placeholder="Mobile Number">
                </div>
                <button type="submit" class="btn btn-primary" id="sbtn">Submit</button>
                <p style="color: black;">Already have an account?<a href="login.html" style="text-decoration: none;">login</a></p>

            </form>
        </div>
        <div class="col-lg-2">
            <div class="bubble bubble-bottom-left" id="message" contenteditable>
                <p class="invalid" id="emailval" style="display: none;"> Email should be of the format abc@xyz.xx(x)(.xxx) </p>
                <p class="invalid" id="passval1" style="display: none;"> Password Length Minimum 8 Characters </p>
                <p class="invalid" id="passval2" style="display: none;"> Minumum 1 lowercase Character </p>
                <p class="invalid" id="passval3" style="display: none;"> Minumum 1 uppercase Character </p>
                <p class="invalid" id="passval4" style="display: none;"> Minumum 1 numner </p>
                <p class="invalid" id="mobileval1" style="display: none;"> Must contain numbers only </p>
                <p class="invalid" id="mobileval2" style="display: none;"> 10 digit Mobile Number </p>
                <p class="invalid" id="passval5" style="display: none;"> Passwords match </p>
            </div>
        </div>
    </div>
    <!-- /Signup Form-->




    <!-- Footer -->
    <footer class="dfooter">Copyright@2021</footer>
    <!-- /Footer -->


</body>

</html>
<script>
    var flag = false;
    var email = document.getElementById("email");
    var emailmsg = document.getElementById("emailval");
    var pass1 = document.getElementById("exampleInputPassword1");
    var pass2 = document.getElementById("exampleInputPassword2");
    var mobilenum = document.getElementById("mobile");
    var passmsg1 = document.getElementById("passval1");
    var passmsg2 = document.getElementById("passval2");
    var passmsg3 = document.getElementById("passval3");
    var passmsg4 = document.getElementById("passval4");
    var passmsg5 = document.getElementById("passval5");
    var mobilemsg1 = document.getElementById("mobileval1");
    var mobilemsg2 = document.getElementById("mobileval2");
    const indicator = document.querySelector(".indicator");
    const weak = document.querySelector(".weak");
    const medium = document.querySelector(".medium");
    const strong = document.querySelector(".strong");
    var sbtn = document.getElementById("sbtn");
    var checkbox = document.getElementById("terms");
    if (flag == true) {
        sbtn.disabled = false;
    }



    // email validation start
    email.onfocus = function() {
        document.getElementById("message").style.display = "block";
        document.getElementById("emailval").style.display = "block"
    }
    email.onblur = function() {
        document.getElementById("message").style.display = "none";
        document.getElementById("emailval").style.display = "none";
    }
    email.onkeyup = function() {
        var regex = /^([A-Za-z0-9\-.]+)@([A-Za-z0-9]+).([a-z]{2,3})(.[a-z]{2,3})?$/;
        if (regex.test(email.value)) {
            emailval.classList.remove("invalid");
            emailval.classList.add("valid");
            falg = true;
        } else {
            emailval.classList.remove("valid");
            emailval.classList.add("invalid");
            flag = false;
        }
    }


    // email validation end

    // password validation start

    pass1.onfocus = function() {
        document.getElementById("message").style.display = "block";
        document.getElementById("passval1").style.display = "block";
        document.getElementById("passval2").style.display = "block";
        document.getElementById("passval3").style.display = "block";
        document.getElementById("passval4").style.display = "block";
    }
    pass1.onblur = function() {
        document.getElementById("message").style.display = "none";
        document.getElementById("passval1").style.display = "none";
        document.getElementById("passval2").style.display = "none";
        document.getElementById("passval3").style.display = "none";
        document.getElementById("passval4").style.display = "none";
    }
    pass1.onkeyup = function() {
            // password length
            if (pass1.value.length >= 8) {
                passmsg1.classList.remove("invalid");
                passmsg1.classList.add("valid");
                flag = true;
            } else {
                passmsg1.classList.remove("valid");
                passmsg1.classList.add("invalid");
                flag = false;
            }
            // password lowercase check
            var lowerCaseLetters = /[a-z]/g;
            if (pass1.value.match(lowerCaseLetters)) {
                passmsg2.classList.remove("invalid");
                passmsg2.classList.add("valid");
                flag = true;
            } else {
                passmsg2.classList.remove("valid");
                passmsg2.classList.add("invalid");
                flag = false;
            }
            // password lowercase check
            var upperCaseLetters = /[A-Z]/g;
            if (pass1.value.match(upperCaseLetters)) {
                passmsg3.classList.remove("invalid");
                passmsg3.classList.add("valid");
                flag = true;
            } else {
                passmsg3.classList.remove("valid");
                passmsg3.classList.add("invalid");
                flag = false;
            }
            // password number check
            var numbers = /[0-9]/g;
            if (pass1.value.match(numbers)) {
                passmsg4.classList.remove("invalid");
                passmsg4.classList.add("valid");
                flag = true;
            } else {
                passmsg4.classList.remove("valid");
                passmsg4.classList.add("invalid");
                flag = false;
            }
            // password validation end
            // password strength validation start
            var no;
            let regExpWeak = /[a-z]/;
            let regExpMedium = /\d+/;
            let regExpStrong = /.[!,@,#,$,%,^,&,*,?,_,~,-,(,)]/;
            if (pass1.value != "") {
                indicator.style.display = "block";
                indicator.style.display = "flex";
                if (pass1.value.length <= 3 && (pass1.value.match(regExpWeak) || pass1.value.match(regExpMedium) || pass1.value.match(regExpStrong))) no = 1;
                if (pass1.value.length >= 6 && ((pass1.value.match(regExpWeak) && pass1.value.match(regExpMedium)) || (pass1.value.match(regExpMedium) && pass1.value.match(regExpStrong)) || (pass1.value.match(regExpWeak) && pass1.value.match(regExpStrong)))) no = 2;
                if (pass1.value.length >= 6 && pass1.value.match(regExpWeak) && pass1.value.match(regExpMedium) && pass1.value.match(regExpStrong)) no = 3;
                if (no == 1) {
                    weak.classList.add("active");
                }
                if (no == 2) {
                    medium.classList.add("active");
                } else {
                    medium.classList.remove("active");
                }
                if (no == 3) {
                    weak.classList.add("active");
                    medium.classList.add("active");
                    strong.classList.add("active");
                } else {
                    strong.classList.remove("active");
                }
            } else {
                indicator.style.display = "none";
            }

            // password strength validation end
        }
        //confirm password
    pass2.onfocus = function() {
        document.getElementById("message").style.display = "block";
        passmsg5.style.display = "block";
    }
    pass2.onblur = function() {
        document.getElementById("message").style.display = "none";
        passmsg5.style.display = "none";
    }
    pass2.onkeyup = function() {
            if (pass1.value == pass2.value) {
                passmsg5.classList.remove("invalid");
                passmsg5.classList.add("valid");
            } else {
                passmsg5.classList.remove("valid");
                passmsg5.classList.add("invalid");
            }
        }
        // Mobile number validation start
    mobilenum.onfocus = function() {
        document.getElementById("message").style.display = "block";
        document.getElementById("mobileval1").style.display = "block";
        document.getElementById("mobileval2").style.display = "block";
    }
    mobilenum.onblur = function() {

        document.getElementById("message").style.display = "none";
        document.getElementById("mobileval1").style.display = "none";
        document.getElementById("mobileval2").style.display = "none";
    }
    mobilenum.onkeyup = function() {
        // Additional format check
        var addformat = /^\(?([0-9]{3})\)?[-. ]?([0-9]{3})[-. ]?([0-9]{4})$/
        var numformat = /^[0-9]{10,10}$/
        var ch = /[^0-9\ -.]+/
        if (mobilenum.value.match(numformat) || mobilenum.value.match(addformat)) {
            mobilemsg2.classList.remove("invalid");
            mobilemsg2.classList.add("valid");
        } else {
            mobilemsg2.classList.remove("valid");
            mobilemsg2.classList.add("invalid");
        }
        if (mobilenum.value.match(ch)) {
            mobilemsg1.classList.remove("valid");
            mobilemsg1.classList.add("invalid");
        } else {
            mobilemsg1.classList.remove("invalid");
            mobilemsg1.classList.add("valid");
        }
        // if(mobilenum.value.match(addformat) || (mobilenum.value.match(numformat)) ){
        //   mobilemsg1.classList.remove("invalid");
        //   mobilemsg1.classList.add("valid");
        //   mobilemsg2.classList.remove("invalid");
        //   mobilemsg2.classList.add("valid");
        //   falg = true;
        // }
        // else{
        //   mobilemsg1.classList.remove("valid");
        //   mobilemsg1.classList.add("invalid");
        //   mobilemsg2.classList.remove("valid");
        //   mobilemsg2.classList.add("invalid");
        //   falg = false;
        // }


    }

    function validation() {
        //email validate
        var emailregex = /^([A-Za-z0-9\-.]+)@([A-Za-z0-9]+).([a-z]{2,3})(.[a-z]{2,3})?$/;
        if (!(emailregex.test(email.value))) {
            window.alert("Email Format incorrect");
            return false;
        }
        //password validate
        var passregex = /^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.{8,})/
        if (!(passregex.test(pass1.value))) {
            window.alert("Password Format incorrect");
            return false;
        }
        if (pass1.value != pass2.value) {
            window.alert("Passwords do not match");
            return false;
        }
        //mobile validation
        var addformat = /^\(?([0-9]{3})\)?[-. ]?([0-9]{3})[-. ]?([0-9]{4})$/
        var numformat = /^[0-9]{10,10}$/
        if (!(mobilenum.value.match(addformat) || (mobilenum.value.match(numformat)))) {
            window.alert("!incorrect Mobile Number Format! Accepted Formats are: xxx-xxx-xxxx , xxx.xxx.xxxx , xxx xxx xxxx , xxxxxxxxxx")
            return false;

        }



    }
</script>